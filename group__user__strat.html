<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sgsPy: strat</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">sgsPy
   </div>
   <div id="projectbrief">structurally guided sampling</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__user__strat.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">strat <div class="ingroups"><a class="el" href="group__user.html">User Documentation</a> &raquo; <a class="el" href="group__user__sample.html">sample</a></div></div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga70b7b3b6b978ab85c9a5df9c7ec25fef" id="r_ga70b7b3b6b978ab85c9a5df9c7ec25fef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga70b7b3b6b978ab85c9a5df9c7ec25fef">sgs.sample.strat.strat.strat</a> (SpatialRaster strat_rast, int|str band, int num_samples, int num_strata, int wrow=3, int wcol=3, str allocation=&quot;prop&quot;, Optional[list[float]] weights=None, Optional[SpatialRaster] mrast=None, Optional[int|str] mrast_band=None, str method=&quot;Queinnec&quot;, Optional[int|float] mindist=None, Optional[SpatialVector] existing=None, bool force=False, Optional[SpatialVector] access=None, Optional[str] layer_name=None, Optional[int|float] buff_inner=None, Optional[int|float] buff_outer=None, bool plot=False, str filename=&quot;&quot;)</td></tr>
<tr class="memdesc:ga70b7b3b6b978ab85c9a5df9c7ec25fef"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function conducts stratified sampling using the stratified raster given.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ga70b7b3b6b978ab85c9a5df9c7ec25fef" name="ga70b7b3b6b978ab85c9a5df9c7ec25fef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga70b7b3b6b978ab85c9a5df9c7ec25fef">&#9670;&#160;</a></span>strat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sgs.sample.strat.strat.strat </td>
          <td>(</td>
          <td class="paramtype">SpatialRaster</td>          <td class="paramname"><span class="paramname"><em>strat_rast</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int | str</td>          <td class="paramname"><span class="paramname"><em>band</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>num_samples</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>num_strata</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int </td>          <td class="paramname"><span class="paramname"><em>wrow</em></span><span class="paramdefsep"> = </span><span class="paramdefval">3</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int </td>          <td class="paramname"><span class="paramname"><em>wcol</em></span><span class="paramdefsep"> = </span><span class="paramdefval">3</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str </td>          <td class="paramname"><span class="paramname"><em>allocation</em></span><span class="paramdefsep"> = </span><span class="paramdefval">&quot;prop&quot;</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[list[float]] </td>          <td class="paramname"><span class="paramname"><em>weights</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[SpatialRaster] </td>          <td class="paramname"><span class="paramname"><em>mrast</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[int | str] </td>          <td class="paramname"><span class="paramname"><em>mrast_band</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str </td>          <td class="paramname"><span class="paramname"><em>method</em></span><span class="paramdefsep"> = </span><span class="paramdefval">&quot;Queinnec&quot;</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[int | float] </td>          <td class="paramname"><span class="paramname"><em>mindist</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[SpatialVector] </td>          <td class="paramname"><span class="paramname"><em>existing</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool </td>          <td class="paramname"><span class="paramname"><em>force</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[SpatialVector] </td>          <td class="paramname"><span class="paramname"><em>access</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[str] </td>          <td class="paramname"><span class="paramname"><em>layer_name</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[int | float] </td>          <td class="paramname"><span class="paramname"><em>buff_inner</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[int | float] </td>          <td class="paramname"><span class="paramname"><em>buff_outer</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool </td>          <td class="paramname"><span class="paramname"><em>plot</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str </td>          <td class="paramname"><span class="paramname"><em>filename</em></span><span class="paramdefsep"> = </span><span class="paramdefval">&quot;&quot;</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function conducts stratified sampling using the stratified raster given. </p>
<p>There are two methods employed to determine which pixels to sample:</p><ul>
<li>The 'random' method randomly selects pixels within a given strata.</li>
<li>The 'Queinnec' method prioritizes pixels which are surrounded by other pixels of the same strata. The 'wrow' and 'wcol' parameters determine the size of the surrounding area required for a pixel to be prioritized.</li>
</ul>
<p>The number of total samples is given by num_samples. The allocation of samples per strata is calculated using the distribution of pixels across the strata, and the allocation method specified by the allocation parameter.</p>
<p>In the case where 'optim' allocation is used, an additional raster must be passed to the mrast parameter, and if that raster contains more than 1 band the mrast_band parameter must be given specifying which band. The optim method is specified by Gregoire and Valentine <a href="https://doi.org/10.1201/9780203498880">https://doi.org/10.1201/9780203498880</a> Section 5.4.4.</p>
<p>The 'existing' parameter, if passed, must be a SpatialVector of type Point or MultiPoint. These points specify samples within an already-existing network. The SpatialVector may only have one layer. If the force parameter is set to True, every pixel in the existing sample will be added no matter what. if the force parameter is false, then the existing samples will be prioritized over other pixels in the same strata.</p>
<p>The 'access' parameter, if passed, must be a SpatialVector of type LineString or MultiLineString. buff_outer specifies the buffer distance around the geometry which is allowed to be included in the sampling, buff_inner specifies the geometry which is not allowed to be included in the sampling. buff_outer must be larger than buff_inner. For a multi-layer vector, layer_name must be specified.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md23"></a>
Examples</h2>
<p>rast = sgs.SpatialRaster("raster.tif") <br  />
srast = <a class="el" href="namespacesgs_1_1stratify_1_1quantiles.html">sgs.stratify.quantiles</a>(rast, num_strata=5) <br  />
samples = <a class="el" href="namespacesgs_1_1sample_1_1strat.html">sgs.sample.strat</a>(srast, band=0, num_samples=200, num_strata=5) #uses Queinnec method with proportional allocation by default</p>
<p>rast = sgs.SpatialRaster("raster.tif") <br  />
srast = <a class="el" href="namespacesgs_1_1stratify_1_1quantiles.html">sgs.stratify.quantiles</a>(rast, num_strata=5) <br  />
samples = <a class="el" href="namespacesgs_1_1sample_1_1strat.html">sgs.sample.strat</a>(srast, band=0, num_samples=200, num_strata=5, method="random", mindist=200, plot=True, filename="samples.shp")</p>
<p>rast = sgs.SpatialRaster("raster.tif") <br  />
srast = <a class="el" href="namespacesgs_1_1stratify_1_1quantiles.html">sgs.stratify.quantiles</a>(rast, num_strata=5) <br  />
samples = <a class="el" href="namespacesgs_1_1sample_1_1strat.html">sgs.sample.strat</a>(srast, band=0, num_samples=200, num_strata=5, method="Queinnec", allocation="optim", mrast=rast)</p>
<p>rast = sgs.SpatialRaster("raster.tif") <br  />
srast = <a class="el" href="namespacesgs_1_1stratify_1_1quantiles.html">sgs.stratify.quantiles</a>(rast, num_strata=5) <br  />
samples = <a class="el" href="namespacesgs_1_1sample_1_1strat.html">sgs.sample.strat</a>(rast, band=0, num_samples=200, num_strata=5, allocation="manual", weights=[0.1, 0.1, 0.2, 0.2, 0.4])</p>
<p>rast = sgs.SpatialRaster("raster.tif") <br  />
access = sgs.SpatialVector("access_network.shp") <br  />
srast = <a class="el" href="namespacesgs_1_1stratify_1_1quantiles.html">sgs.stratify.quantiles</a>(rast, num_strata=5) <br  />
samples = <a class="el" href="namespacesgs_1_1sample_1_1strat.html">sgs.sample.strat</a>(rast, band=0, num_samples=200, num_strata=5, allocation="equal", access=access, buff_inner=100, buff_outer=300)</p>
<p>rast = sgs.SpatialRaster("raster.tif") <br  />
existng = sgs.SpatialVector("existing_samples.shp") <br  />
srast =<a class="el" href="namespacesgs_1_1stratify_1_1quantiles.html">sgs.stratify.quantiles</a>(rast, num_strata=5) <br  />
samples = <a class="el" href="namespacesgs_1_1sample_1_1strat.html">sgs.sample.strat</a>(rast, band=0, num_samples=200, num_strata=5, allocation="prop", existing=existing, force=True)</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md24"></a>
Parameters</h2>
<p>strat_rast : SpatialRaster the raster to sample band : int | str <br  />
 the band within the strat_rast to use, either a 0-indexed int value or the name of the band <br  />
 <br  />
num_samples : int <br  />
 the desired number of samples <br  />
 <br  />
num_strata : int <br  />
 the number of strata in the strat_rast. If this number is incorrect it may cause undefined behavior in the C++ code which determines sample locations. <br  />
 <br  />
wrow : int <br  />
 the number of rows to be considered in the focal window for the 'Queinnec' method <br  />
 <br  />
wcol : int <br  />
 the number of columns to be considered in the focal window for the 'Queinnec' method <br  />
 <br  />
allocation : str <br  />
 the allocation method to determine the number of samples per strata. One of 'prop', 'equal', 'optim', or 'manual' <br  />
 <br  />
weights : list[float] <br  />
 the allocation percentages of each strata if the allocation method is 'manual' <br  />
 <br  />
mrast : SpatialRaster <br  />
 the raster used to calculate 'optim' allocation if 'optim' allocation is used <br  />
 <br  />
mrast_band : str | int <br  />
 specifies the band within mrast to use <br  />
 <br  />
method : str <br  />
 the sampling method, either 'random', or 'Queinnec' <br  />
 <br  />
mindist : float <br  />
 the minimum distance allowed between sample points <br  />
 <br  />
existing : SpatialVector <br  />
 a vector of Point or Multipoint which are part of a pre-existing sample network <br  />
 <br  />
force : bool <br  />
 whether to automatically include all points in the existing network or not <br  />
 <br  />
access : SpatialVector <br  />
 a vector of LineString or MultiLineString geometries to sample near to <br  />
 <br  />
layer_name : str <br  />
 <br  />
 the layer within 'access' to use for access buffering <br  />
 <br  />
buff_inner : float <br  />
 the inner buffer around the access LineStrings, where samples should not occur <br  />
 <br  />
buff_outer : float <br  />
 the outer buffer around the access LineStrings, The area in which samples must occur <br  />
 <br  />
plot : bool <br  />
 whether or not to plot the output samples <br  />
 <br  />
filename : str <br  />
 the output filename to write to if desired <br  />
 <br  />
</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md25"></a>
Returns</h2>
<p>a SpatialVector object containing point geometries of sample locations </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
