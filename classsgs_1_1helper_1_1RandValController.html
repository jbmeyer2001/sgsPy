<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sgsPy: sgs::helper::RandValController</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">sgsPy
   </div>
   <div id="projectbrief">structurally guided sampling</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('classsgs_1_1helper_1_1RandValController.html','','classsgs_1_1helper_1_1RandValController-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">sgs::helper::RandValController</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="helper_8h_source.html">helper.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afe63bd424bc725a0316673b2c0547d73" id="r_afe63bd424bc725a0316673b2c0547d73"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe63bd424bc725a0316673b2c0547d73">RandValController</a> (int xBlockSize, int yBlockSize, uint64_t multiplier, xso::xoshiro_4x64_plus *p_rng)</td></tr>
<tr class="memitem:a4389c4f4540bb6a02974a1408e417f0a" id="r_a4389c4f4540bb6a02974a1408e417f0a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4389c4f4540bb6a02974a1408e417f0a">calculateRandValues</a> (void)</td></tr>
<tr class="memitem:aae3b32d034b2b3c14896ed972c099cd6" id="r_aae3b32d034b2b3c14896ed972c099cd6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae3b32d034b2b3c14896ed972c099cd6">next</a> (void)</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This struct controls the calculation and usage of random values during the iteration through the raster. A random number must be generated for each pixel to see if it will be saved for potential sampling.</p>
<p>The xoshiro random number generator is used because it is efficient and statistically sound. The specific generator used (xso::xoshrio_4x64_plus) is used because it is very fast. However, it's lowest 11 bits have low linear complexity (Blackman &amp; Vigna).</p>
<p>We have no need for these lower 11 bits, instead using only the upper 53 bits of the uint64_t value. Proof of this is that, supposing we require the use of all 53 bits, this means a probability of 1/(2^(56)), or roughly 1 sample per 10^16 pixels. If there were 10^16 pixels to process than a minimum of multiple years would likely pass before execution finished.</p>
<p>Rather than calling the generator on every iteration, the generator is repeatedly called at the beginning of a block for the remaining required pixels, and the true/false values for whether to save a pixel or not are stored in a vector of type boolean. </p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="afe63bd424bc725a0316673b2c0547d73" name="afe63bd424bc725a0316673b2c0547d73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe63bd424bc725a0316673b2c0547d73">&#9670;&#160;</a></span>RandValController()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sgs::helper::RandValController::RandValController </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>xBlockSize</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>yBlockSize</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>multiplier</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">xso::xoshiro_4x64_plus *</td>          <td class="paramname"><span class="paramname"><em>p_rng</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructor, sets the size of the boolean vector, and assigns the randValIndex, multiplier, and p_rng member variables.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">int</td><td>xBlockSize </td></tr>
    <tr><td class="paramname">int</td><td>yBlockSize </td></tr>
    <tr><td class="paramname">uint64_t</td><td>multiplier </td></tr>
    <tr><td class="paramname">xso::xoshiro_4x64_plus</td><td>*p_rng </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a4389c4f4540bb6a02974a1408e417f0a" name="a4389c4f4540bb6a02974a1408e417f0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4389c4f4540bb6a02974a1408e417f0a">&#9670;&#160;</a></span>calculateRandValues()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sgs::helper::RandValController::calculateRandValues </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calculates the true/false values from rand values, a number of times equal to the number of used random values from the previous block. The return value of the random number generator is bit shifted by 11 to ignore the lower 11 bits, which have low linear complexity.</p>
<p>Next, the bit shifted random value is masked with the multiplier, and if the random value contains a 1 in every bit which the multiplier does, true is added to the rand val vector.</p>
<p>This function is called before iterating through a new block. </p>

</div>
</div>
<a id="aae3b32d034b2b3c14896ed972c099cd6" name="aae3b32d034b2b3c14896ed972c099cd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae3b32d034b2b3c14896ed972c099cd6">&#9670;&#160;</a></span>next()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool sgs::helper::RandValController::next </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>get the next boolean value from the storage vector, and increment the index of this vector. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>sgspy/utils/<a class="el" href="helper_8h_source.html">helper.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="namespacesgs.html">sgs</a></li><li class="navelem"><a href="namespacesgs_1_1helper.html">helper</a></li><li class="navelem"><a href="classsgs_1_1helper_1_1RandValController.html">RandValController</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
