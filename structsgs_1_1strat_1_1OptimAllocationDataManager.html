<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sgsPy: sgs::strat::OptimAllocationDataManager Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">sgsPy
   </div>
   <div id="projectbrief">structurally guided sampling</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('structsgs_1_1strat_1_1OptimAllocationDataManager.html','','structsgs_1_1strat_1_1OptimAllocationDataManager-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">sgs::strat::OptimAllocationDataManager Struct Reference<div class="ingroups"><a class="el" href="group__dev.html">Developer Documentation</a> &raquo; <a class="el" href="group__sample.html">sample</a> &raquo; <a class="el" href="group__strat.html">strat</a></div></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="strat_8h_source.html">strat.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5c67838924825e837e90a529e9b40258" id="r_a5c67838924825e837e90a529e9b40258"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c67838924825e837e90a529e9b40258">OptimAllocationDataManager</a> (<a class="el" href="classsgs_1_1raster_1_1GDALRasterWrapper.html">raster::GDALRasterWrapper</a> *p_raster, int bandNum, std::string allocation)</td></tr>
<tr class="memitem:a67f0f1be26f91baa1085b7e82b23d7d1" id="r_a67f0f1be26f91baa1085b7e82b23d7d1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a67f0f1be26f91baa1085b7e82b23d7d1">~OptimAllocationDataManager</a> ()</td></tr>
<tr class="memitem:a4f913355efc2c97c44d19ad0f8afd125" id="r_a4f913355efc2c97c44d19ad0f8afd125"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4f913355efc2c97c44d19ad0f8afd125">init</a> (int numStrata, int xBlockSize, int yBlockSize)</td></tr>
<tr class="memitem:a9a49e0c1fcbe139febdf52e0507e3577" id="r_a9a49e0c1fcbe139febdf52e0507e3577"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9a49e0c1fcbe139febdf52e0507e3577">readNewBlock</a> (int xBlockSize, int yBlockSize, int xBlock, int yBlock, int xValid, int yValid)</td></tr>
<tr class="memitem:aea5accf5a91a6c3fb3dcebf175e326ae" id="r_aea5accf5a91a6c3fb3dcebf175e326ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aea5accf5a91a6c3fb3dcebf175e326ae">update</a> (int index, int strata)</td></tr>
<tr class="memitem:a4fd7a7decfdb4e841081edb73c4be5a6" id="r_a4fd7a7decfdb4e841081edb73c4be5a6"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4fd7a7decfdb4e841081edb73c4be5a6">getAllocationPercentages</a> (void)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-attribs" class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a89cb18f974da9fa18c540f5b258eb3ed" id="r_a89cb18f974da9fa18c540f5b258eb3ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsgs_1_1helper_1_1RasterBandMetaData.html">helper::RasterBandMetaData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a89cb18f974da9fa18c540f5b258eb3ed">band</a></td></tr>
<tr class="memitem:a899e3ac5d8a80ef4c4633884aaeb8f7d" id="r_a899e3ac5d8a80ef4c4633884aaeb8f7d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classsgs_1_1helper_1_1Variance.html">helper::Variance</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a899e3ac5d8a80ef4c4633884aaeb8f7d">variances</a></td></tr>
<tr class="memitem:a98be6b65b60c631367269c851cd3d1fb" id="r_a98be6b65b60c631367269c851cd3d1fb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a98be6b65b60c631367269c851cd3d1fb">used</a> = false</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This struct deals with the 'optim' allocation method. The optim allocation method requires that the within-strata variance be calculated based on a seperate raster band. This struct stores band information for the raster band which is used to calculate the variance, the variance per strata, as well as whether the optim method is used. </p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5c67838924825e837e90a529e9b40258" name="a5c67838924825e837e90a529e9b40258"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c67838924825e837e90a529e9b40258">&#9670;&#160;</a></span>OptimAllocationDataManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sgs::strat::OptimAllocationDataManager::OptimAllocationDataManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsgs_1_1raster_1_1GDALRasterWrapper.html">raster::GDALRasterWrapper</a> *</td>          <td class="paramname"><span class="paramname"><em>p_raster</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>bandNum</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string</td>          <td class="paramname"><span class="paramname"><em>allocation</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructor, creates an instance of <a class="el" href="structsgs_1_1strat_1_1OptimAllocationDataManager.html">OptimAllocationDataManager</a> given a pointer to the raster containing the band to use, as well as the integer band number. The allocation method is also passed, and if the allocation is not 'optim', this struct remains unused.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">GDALRasterWrapper</td><td>*p_raster </td></tr>
    <tr><td class="paramname">int</td><td>bandNum </td></tr>
    <tr><td class="paramname">std::string</td><td>allocation </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a67f0f1be26f91baa1085b7e82b23d7d1" name="a67f0f1be26f91baa1085b7e82b23d7d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67f0f1be26f91baa1085b7e82b23d7d1">&#9670;&#160;</a></span>~OptimAllocationDataManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sgs::strat::OptimAllocationDataManager::~OptimAllocationDataManager </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Deconstructor, this method frees memory which would be allocated if this object was used. </p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a4fd7a7decfdb4e841081edb73c4be5a6" name="a4fd7a7decfdb4e841081edb73c4be5a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fd7a7decfdb4e841081edb73c4be5a6">&#9670;&#160;</a></span>getAllocationPercentages()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; sgs::strat::OptimAllocationDataManager::getAllocationPercentages </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function gets the allocation percentages per strata using the variances. The optim allocation method is specified by Gregoire and Valentine <a href="https://doi.org/10.1201/9780203498880">https://doi.org/10.1201/9780203498880</a> Section 5.4.4. The method requires that the count and standard deviation of a particular strata be multiplied, and the proportion of samples to go to the particular strata strata is this product divided by the sum of the product of standard deviation and count for every strata.</p>
<p>The proportions are calculated using the vector of Variance calculations which have been updated throughout the iteration if the raster, and returned as a vector of double.</p>
<dl class="section return"><dt>Returns</dt><dd>std::vector&lt;double&gt; </dd></dl>

</div>
</div>
<a id="a4f913355efc2c97c44d19ad0f8afd125" name="a4f913355efc2c97c44d19ad0f8afd125"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f913355efc2c97c44d19ad0f8afd125">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sgs::strat::OptimAllocationDataManager::init </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>numStrata</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>xBlockSize</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>yBlockSize</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initializes some of the data within the struct, setting the size of the vector which contains Variance information, as well as allocating the memory which will be used to store the raster band.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">int</td><td>numStrata </td></tr>
    <tr><td class="paramname">int</td><td>xBlockSize </td></tr>
    <tr><td class="paramname">int</td><td>yBlockSize </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9a49e0c1fcbe139febdf52e0507e3577" name="a9a49e0c1fcbe139febdf52e0507e3577"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a49e0c1fcbe139febdf52e0507e3577">&#9670;&#160;</a></span>readNewBlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sgs::strat::OptimAllocationDataManager::readNewBlock </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>xBlockSize</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>yBlockSize</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>xBlock</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>yBlock</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>xValid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>yValid</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function reads a new block of data in from the raster band which this struct controls.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">int</td><td>xBlockSize </td></tr>
    <tr><td class="paramname">int</td><td>yBlockSize </td></tr>
    <tr><td class="paramname">int</td><td>xBlock </td></tr>
    <tr><td class="paramname">int</td><td>yBlock </td></tr>
    <tr><td class="paramname">int</td><td>xValid </td></tr>
    <tr><td class="paramname">int</td><td>yValid </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aea5accf5a91a6c3fb3dcebf175e326ae" name="aea5accf5a91a6c3fb3dcebf175e326ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea5accf5a91a6c3fb3dcebf175e326ae">&#9670;&#160;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sgs::strat::OptimAllocationDataManager::update </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>strata</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function updates the Variance calculation for a particular pixel. The index of the pixel within the block is given, to get the pixel value. The strata is also given to indicate which strata's variance to update. This function should not be called if the pixel is nan.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">int</td><td>index </td></tr>
    <tr><td class="paramname">int</td><td>strata </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a name="doc-variable-members" id="doc-variable-members"></a><h2 id="header-doc-variable-members" class="groupheader">Member Data Documentation</h2>
<a id="a89cb18f974da9fa18c540f5b258eb3ed" name="a89cb18f974da9fa18c540f5b258eb3ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89cb18f974da9fa18c540f5b258eb3ed">&#9670;&#160;</a></span>band</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsgs_1_1helper_1_1RasterBandMetaData.html">helper::RasterBandMetaData</a> sgs::strat::OptimAllocationDataManager::band</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a98be6b65b60c631367269c851cd3d1fb" name="a98be6b65b60c631367269c851cd3d1fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98be6b65b60c631367269c851cd3d1fb">&#9670;&#160;</a></span>used</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sgs::strat::OptimAllocationDataManager::used = false</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a899e3ac5d8a80ef4c4633884aaeb8f7d" name="a899e3ac5d8a80ef4c4633884aaeb8f7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a899e3ac5d8a80ef4c4633884aaeb8f7d">&#9670;&#160;</a></span>variances</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classsgs_1_1helper_1_1Variance.html">helper::Variance</a>&gt; sgs::strat::OptimAllocationDataManager::variances</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>sgs/sample/strat/<a class="el" href="strat_8h_source.html">strat.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="namespacesgs.html">sgs</a></li><li class="navelem"><a href="namespacesgs_1_1strat.html">strat</a></li><li class="navelem"><a href="structsgs_1_1strat_1_1OptimAllocationDataManager.html">OptimAllocationDataManager</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
