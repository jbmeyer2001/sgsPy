<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sgsPy: sgs::strat::IndexStorageVectors Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">sgsPy
   </div>
   <div id="projectbrief">structurally guided sampling</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('classsgs_1_1strat_1_1IndexStorageVectors.html','','classsgs_1_1strat_1_1IndexStorageVectors-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">sgs::strat::IndexStorageVectors Class Reference<div class="ingroups"><a class="el" href="group__dev.html">Developer Documentation</a> &raquo; <a class="el" href="group__sample.html">sample</a> &raquo; <a class="el" href="group__strat.html">strat</a></div></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="strat_8h_source.html">strat.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a174b606451c962174158df4f6a6b0ad7" id="r_a174b606451c962174158df4f6a6b0ad7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a174b606451c962174158df4f6a6b0ad7">IndexStorageVectors</a> (int64_t numStrata, int64_t x)</td></tr>
<tr class="memitem:acd0ffa33fcae7f73d0d22f895b28ce9a" id="r_acd0ffa33fcae7f73d0d22f895b28ce9a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acd0ffa33fcae7f73d0d22f895b28ce9a">updateStrataCounts</a> (int strata)</td></tr>
<tr class="memitem:a3e2f49ecb779f3777679237476d6864d" id="r_a3e2f49ecb779f3777679237476d6864d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3e2f49ecb779f3777679237476d6864d">updateIndexesVector</a> (int strata, <a class="el" href="structsgs_1_1helper_1_1Index.html">helper::Index</a> &amp;index)</td></tr>
<tr class="memitem:a0686eed902d35247d1fe2a209ce7df79" id="r_a0686eed902d35247d1fe2a209ce7df79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0686eed902d35247d1fe2a209ce7df79">updateFirstXIndexesVector</a> (int strata, <a class="el" href="structsgs_1_1helper_1_1Index.html">helper::Index</a> &amp;index)</td></tr>
<tr class="memitem:a9be0b48c7067d2b10e90b87572c62ca1" id="r_a9be0b48c7067d2b10e90b87572c62ca1"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; <a class="el" href="structsgs_1_1helper_1_1Index.html">helper::Index</a> &gt; * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9be0b48c7067d2b10e90b87572c62ca1">getStrataIndexVectors</a> (std::vector&lt; int64_t &gt; existing, std::vector&lt; int64_t &gt; strataSampleCounts, xso::xoshiro_4x64_plus &amp;rng)</td></tr>
<tr class="memitem:a07f1e7dad651018246902b1f61b1c9d6" id="r_a07f1e7dad651018246902b1f61b1c9d6"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int64_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a07f1e7dad651018246902b1f61b1c9d6">getStrataCounts</a> (void)</td></tr>
<tr class="memitem:a5f46307f09eb3b4139ec37d54ddf516d" id="r_a5f46307f09eb3b4139ec37d54ddf516d"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5f46307f09eb3b4139ec37d54ddf516d">getNumDataPixels</a> (void)</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This struct is responsible for storing the indices saved while iterating through the raster.</p>
<p>The strataCounts vector strores the total count of each strata within the stratified raster. The indexCountPerStrata vector stores the total number of indices saved for each strata. The indexesPerStrata vector stores the indices saved of each strata.</p>
<p>Since the pixels are probabilistically added, and this probability is calculated before knowing the total proportion of strata within the strat raster, there is a potential problem if one strata does not appear as much as the others, as this could mean less than the total number of required pixels for that strata are actually saved. This is where the 'first x' vectors come in. They always store the first x number of pixels in a particular strata, meaning that if there are less than x (10,000) pixels of a particular strata, all pixels within that strata will be saved and there is not a worry of missing out on a particular strata due to having a lower proportion. </p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a174b606451c962174158df4f6a6b0ad7" name="a174b606451c962174158df4f6a6b0ad7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a174b606451c962174158df4f6a6b0ad7">&#9670;&#160;</a></span>IndexStorageVectors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sgs::strat::IndexStorageVectors::IndexStorageVectors </td>
          <td>(</td>
          <td class="paramtype">int64_t</td>          <td class="paramname"><span class="paramname"><em>numStrata</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t</td>          <td class="paramname"><span class="paramname"><em>x</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructor. Set the numStrata and x variables. Also, resize the vectors so that their size is numStrata.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">int64_t</td><td>numStrata </td></tr>
    <tr><td class="paramname">int64_t</td><td>x </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a5f46307f09eb3b4139ec37d54ddf516d" name="a5f46307f09eb3b4139ec37d54ddf516d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f46307f09eb3b4139ec37d54ddf516d">&#9670;&#160;</a></span>getNumDataPixels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t sgs::strat::IndexStorageVectors::getNumDataPixels </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>get the total number of data (not nan) pixels.</p>
<dl class="section return"><dt>Returns</dt><dd>int64_t </dd></dl>

</div>
</div>
<a id="a07f1e7dad651018246902b1f61b1c9d6" name="a07f1e7dad651018246902b1f61b1c9d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07f1e7dad651018246902b1f61b1c9d6">&#9670;&#160;</a></span>getStrataCounts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; int64_t &gt; sgs::strat::IndexStorageVectors::getStrataCounts </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>get the pixel counts per strata.</p>
<dl class="section return"><dt>Returns</dt><dd>std::vector&lt;int64_t&gt; </dd></dl>

</div>
</div>
<a id="a9be0b48c7067d2b10e90b87572c62ca1" name="a9be0b48c7067d2b10e90b87572c62ca1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9be0b48c7067d2b10e90b87572c62ca1">&#9670;&#160;</a></span>getStrataIndexVectors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; <a class="el" href="structsgs_1_1helper_1_1Index.html">helper::Index</a> &gt; * &gt; sgs::strat::IndexStorageVectors::getStrataIndexVectors </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; int64_t &gt;</td>          <td class="paramname"><span class="paramname"><em>existing</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int64_t &gt;</td>          <td class="paramname"><span class="paramname"><em>strataSampleCounts</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">xso::xoshiro_4x64_plus &amp;</td>          <td class="paramname"><span class="paramname"><em>rng</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>get references to shuffled strata index vectors. This method is called after the whole raster has been iterated through, and potential sample pixels are saved.</p>
<p>If there are not enough values in the normal saved strata, but the first X samples have been saved (and there hasn't been too many pixels), then the first X samples are used. Otherwise, the normal saved samples are used.</p>
<p>A reference is saved for a shuffled version of the vector chosen. The reason a shuffled version is returned is because the raster is iterated through in an ordered manor (by blocks). If it wasn't shuffled, the samples selected would be the ones closes to the beginning.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">std::vector&lt;int64_t&gt;</td><td>existing </td></tr>
    <tr><td class="paramname">std::vector&lt;int64_t&gt;</td><td>strataSampleCounts </td></tr>
    <tr><td class="paramname">xso::xoshiro_4x64_plus&amp;</td><td>rng</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::vector&lt;std::vector&lt;Index&gt; *&gt; </dd></dl>

</div>
</div>
<a id="a0686eed902d35247d1fe2a209ce7df79" name="a0686eed902d35247d1fe2a209ce7df79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0686eed902d35247d1fe2a209ce7df79">&#9670;&#160;</a></span>updateFirstXIndexesVector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sgs::strat::IndexStorageVectors::updateFirstXIndexesVector </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>strata</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsgs_1_1helper_1_1Index.html">helper::Index</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>index</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>update the first x indexes vector with a new index of a particular strata.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">int</td><td>strata </td></tr>
    <tr><td class="paramname">Index&amp;</td><td>index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3e2f49ecb779f3777679237476d6864d" name="a3e2f49ecb779f3777679237476d6864d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e2f49ecb779f3777679237476d6864d">&#9670;&#160;</a></span>updateIndexesVector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sgs::strat::IndexStorageVectors::updateIndexesVector </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>strata</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsgs_1_1helper_1_1Index.html">helper::Index</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>index</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>update the indexes vector with a new index of a particular strata.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">int</td><td>strata </td></tr>
    <tr><td class="paramname">Index&amp;</td><td>index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acd0ffa33fcae7f73d0d22f895b28ce9a" name="acd0ffa33fcae7f73d0d22f895b28ce9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd0ffa33fcae7f73d0d22f895b28ce9a">&#9670;&#160;</a></span>updateStrataCounts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sgs::strat::IndexStorageVectors::updateStrataCounts </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>strata</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>update the total count by 1 of a particular strata.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">int</td><td>strata </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>sgs/sample/strat/<a class="el" href="strat_8h_source.html">strat.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="namespacesgs.html">sgs</a></li><li class="navelem"><a href="namespacesgs_1_1strat.html">strat</a></li><li class="navelem"><a href="classsgs_1_1strat_1_1IndexStorageVectors.html">IndexStorageVectors</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
